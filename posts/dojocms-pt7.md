---
title: 'Creating dojoCMS Part 7 - Creating a User with Devise'
date: '2015-05-28'
description:
tags: [dojoCMS, Ruby on Rails, ruby]
---

Now that we have Devise installed, we can use Devise to generate a User model for our application.
In the command line we type:

`rails generate devise user`

Devise will create several files for us including a database migration, some testing files, and the user.rb file.

In our migration file (db/migrate), we can observe the setup that Devise has created for us. Like all other migration files, it us used to generate tables in our database.
This includes a table called "users", which also contains attributes for the user containing
email, encrypted_password, reset_password_token, remember_created_at, sign_in_count and more.
You can see that these attributes are provided depending on the attributes that you set on your user.rb file. 

Another bonus to note is the encrypted_password attribute that is generated by Devise. When someone enters a password into the system, we don't want to store the password in plain text. Instead, we encrypt the password and store that in the database. When they go to log into the website, the system will apply the same hashing [algorithm](http://en.wikipedia.org/wiki/Secure_Hash_Algorithm) and compare it to the one that is stored in the database. The hashing algorithm and authentication of the encrypted is all provided by Devise so you don't have to implement the system yourself. (I guess kind of the whole point of using Devise in the first place lol).

As you scroll down the migration file, you will observe more attributes that are derived from the other modules provided by Devise such as Rememberable, Trackable, etc. For more information related to these modules, please check out the Devise [documentation page](https://github.com/plataformatec/devise)

We want to add some more attributes to our migration file so that our user model can also have a first name, last name, and a profile name. In our migration file above the ## Database authenticatable section,
we type:

<pre prettyprint linenums>
	t.string :first_name
	t.string :last_name
	t.string :profile_name
</pre>

and then run:

`rake db:migrate` 

in our terminal. When we run this command, Rails will look at the different migration files and then run commands to bring our local databases up to speed with whats is in the code. 

Devise also modifies the routes file so the application recognizes the routes generated by Devise. If you look at the routes file, you will see the code that is added by Devise:

`devise_for :users`

If you type rake routes in the command line, you can see Devise has added a whole bunch of new routes to our system. For our new users that want to register for our site, the route is located at /users/sign_up.
You can start up your rails server:

`rails s`

and then go to localhost:3000/users/sign_up, you will see your sign up page! 